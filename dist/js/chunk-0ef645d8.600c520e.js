(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ef645d8"],{bb51:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a=Object(n["S"])("data-v-93386378");Object(n["B"])("data-v-93386378");var o={class:"search-bar"},l={id:"mainbox"},i={class:"order-tab"},u={class:"goodslist better-scroll-wrapper"},r={class:"content better-scroll-content"},s={class:"tip-text"},d=Object(n["j"])("p",null,"暂时没有商品哦.......",-1);Object(n["z"])();var b=a((function(e,t,c,b,j,v){var O=Object(n["G"])("van-search"),f=Object(n["G"])("van-tab"),p=Object(n["G"])("van-tabs"),g=Object(n["G"])("van-sidebar-item"),m=Object(n["G"])("van-collapse-item"),h=Object(n["G"])("van-collapse"),y=Object(n["G"])("van-sidebar"),k=Object(n["G"])("van-card"),C=Object(n["G"])("BackTop");return Object(n["y"])(),Object(n["g"])(n["a"],null,[Object(n["j"])("div",o,[Object(n["j"])(O,{modelValue:b.searchKey,"onUpdate:modelValue":t[2]||(t[2]=function(e){return b.searchKey=e}),"show-action":"",label:"书籍",placeholder:"请输入搜索关键词",background:"#42b983","input-align":"center",shape:"round",clearable:"",onClear:b.onClear,"clear-trigger":"always"},{action:a((function(){return[Object(n["j"])("div",{onClick:t[1]||(t[1]=function(){return b.onSearch&&b.onSearch.apply(b,arguments)})},"搜索")]})),_:1},8,["modelValue","onClear"])]),Object(n["j"])("div",l,[Object(n["j"])("div",i,[Object(n["j"])(p,{modelValue:b.active,"onUpdate:modelValue":t[3]||(t[3]=function(e){return b.active=e}),onClick:b.tabClick},{default:a((function(){return[Object(n["j"])(f,{title:"销量排序"}),Object(n["j"])(f,{title:"价格排序"}),Object(n["j"])(f,{title:"评论排序"})]})),_:1},8,["modelValue","onClick"])]),Object(n["j"])(y,{class:"leftmenu better-scroll-wrapper",modelValue:b.activeKey,"onUpdate:modelValue":t[5]||(t[5]=function(e){return b.activeKey=e})},{default:a((function(){return[Object(n["j"])(h,{modelValue:b.activeName,"onUpdate:modelValue":t[4]||(t[4]=function(e){return b.activeName=e}),accordion:""},{default:a((function(){return[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(b.categories,(function(e){return Object(n["y"])(),Object(n["g"])(m,{key:e.id,title:e.name,name:e.name},{default:a((function(){return[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(e.children,(function(e){return Object(n["y"])(),Object(n["g"])(g,{key:e.id,title:e.name,onClick:function(t){return b.getGoods(e.id)}},null,8,["title","onClick"])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"]),Object(n["j"])("div",u,[Object(n["j"])("div",r,[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(b.showGoods,(function(e){return Object(n["y"])(),Object(n["g"])(k,{onClick:function(t){return b.itemClick(e.id)},key:e.id,num:e.comments_count,tag:e.comments_count>=0?"流行":"标签",price:e.price,desc:e.updated_at,title:e.title,thumb:e.cover_url,"lazy-load":!0},null,8,["onClick","num","tag","price","desc","title","thumb"])})),128))])]),Object(n["Q"])(Object(n["j"])("div",s,[d],512),[[n["N"],!b.showGoods.length]])]),Object(n["Q"])(Object(n["j"])(C,{onBTop:b.bTop},null,8,["onBTop"]),[[n["N"],b.isShowBackTop]])],64)})),j=c("2909"),v=c("725f"),O=(c("99af"),c("1bab"));function f(){return Object(O["a"])({url:"/api/goods"})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sales",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(O["a"])({url:"/api/goods?category_id=".concat(t,"&page=").concat(c,"&").concat(e,"=1")})}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sales",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(O["a"])({url:"/api/goods?category_id=".concat(c,"&page=").concat(n,"&").concat(t,"=1&title=").concat(e)})}var m=c("6c02"),h=c("f40f"),y=c("626a"),k={components:{BackTop:v["a"]},setup:function(){var e=Object(m["d"])(),t=Object(n["D"])(1),c=Object(n["D"])(0),a=Object(n["D"])([]),o=Object(n["D"])(0),l=Object(n["D"])(!1),i=Object(n["D"])("sales"),u=Object(n["D"])(0),r=Object(n["C"])({sales:{page:1,list:[]},price:{page:1,list:[]},comments_count:{page:1,list:[]}}),s=function(e,t){var c=null;return function(){var n=!c;n&&e(),c&&clearTimeout(c),c=setTimeout((function(){c=null}),t)}},d=Object(n["D"])(""),b=s((function(){d.value,g(d.value,i.value).then((function(e){r[i.value].list=e.goods.data}))}),2e3),v=function(){},O=Object(n["C"])({}),k=Object(n["e"])((function(){return r[i.value].list,r[i.value].list})),C=function(){p("sales",u.value).then((function(e){r.sales.list=e.goods.data})),p("price",u.value).then((function(e){r.price.list=e.goods.data})),p("comments_count",u.value).then((function(e){r.comments_count.list=e.goods.data})),f().then((function(e){a.value=e.categories}))},_=function(){O=new h["a"](document.querySelector(".goodslist"),{probeType:3,click:!0,pullUpLoad:!0,mouseWheel:{speed:20,invert:!1,easeTime:300}}),O.on("scroll",(function(e){l.value=-e.y>300})),O.on("pullingUp",(function(){var e=r[i.value].page+1;p(i.value,u.value,e).then((function(e){var t;e.goods.data,(t=r[i.value].list).push.apply(t,Object(j["a"])(e.goods.data)),r[i.value].page+=1})),O.finishPullUp(),u.value,O.refresh(),document.querySelector(".content").clientHeight}))};Object(n["v"])((function(){y["a"].loading({message:"加载中...",forbidClick:!0}),C(),_(),y["a"].clear()}));var w=function(e){var t=["sales","price","comments_count"];i.value=t[e],p(i.value,u.value).then((function(e){r.sales.list=e.goods.data,Object(n["q"])((function(){O&&O.refresh()}))}))},G=function(e){u.value=e,p("sales",u.value).then((function(e){r.sales.list=e.goods.data}))},T=function(){O.scrollTo(0,0,500)};return{onSearch:b,onClear:v,searchKey:d,debounce:s,activeKey:c,categories:a,activeName:o,active:t,tabClick:w,currentOrderTab:i,getGoods:G,currentCid:u,showGoods:k,isShowBackTop:l,bTop:T,itemClick:function(t){e.push({path:"/detail",query:{id:t}})}}}};c("d429");k.render=b,k.__scopeId="data-v-93386378";t["default"]=k},bf55:function(e,t,c){},d429:function(e,t,c){"use strict";c("bf55")}}]);