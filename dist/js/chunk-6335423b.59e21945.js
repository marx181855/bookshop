(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6335423b"],{"178e":function(t,e,c){"use strict";c.d(e,"b",(function(){return r})),c.d(e,"a",(function(){return a}));var n=c("1bab");function r(t){return Object(n["a"])({url:"/api/orders/".concat(t,"/status")})}function a(t,e){return Object(n["a"])({url:"/api/orders/".concat(t,"/pay"),params:e})}},"400b":function(t,e,c){},"7fa7":function(t,e,c){"use strict";c("400b")},a38c:function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),r={class:"create-order"},a=Object(n["i"])("订单预览"),o={class:"address-wrap"},s={class:"address"},u={class:"good"},i={class:"good-img"},d={alt:""},b={class:"good-desc"},l={class:"good-title"},j={class:"good-btn"},O={class:"price"},f=Object(n["j"])("small",null,"￥",-1),p=Object(n["i"])("商品余额"),h=Object(n["i"])(" 支付宝二维码 "),v=Object(n["j"])("br",null,null,-1),g=Object(n["i"])(" 微信支付二维码 "),y=Object(n["j"])("br",null,null,-1);function m(t,e,c,m,w,_){var P=Object(n["G"])("NavBar"),C=Object(n["G"])("van-submit-bar"),N=Object(n["G"])("van-image"),k=Object(n["G"])("van-grid-item"),G=Object(n["G"])("van-grid"),K=Object(n["G"])("van-popup"),L=Object(n["H"])("lazy");return Object(n["y"])(),Object(n["g"])("div",r,[Object(n["j"])(P,null,{default:Object(n["P"])((function(){return[a]})),_:1}),Object(n["j"])("div",o,[Object(n["j"])("div",{class:"name",onClick:e[1]||(e[1]=function(){return m.goTo&&m.goTo.apply(m,arguments)})},[Object(n["j"])("span",null,Object(n["K"])(t.address.name),1),Object(n["j"])("span",null,Object(n["K"])(t.address.phone),1)]),Object(n["j"])("div",s,Object(n["K"])(t.address.province+t.address.city+t.address.county+t.address.address),1)]),Object(n["j"])("div",u,[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(t.cartList,(function(t,e){return Object(n["y"])(),Object(n["g"])("div",{class:"good-item",key:e},[Object(n["j"])("div",i,[Object(n["Q"])(Object(n["j"])("img",d,null,512),[[L,t.goods.cover_url]])]),Object(n["j"])("div",b,[Object(n["j"])("div",l,[Object(n["j"])("span",null,Object(n["K"])(t.goods.title),1),Object(n["j"])("span",null,"x"+Object(n["K"])(t.num),1)]),Object(n["j"])("div",j,[Object(n["j"])("div",O,[f,Object(n["i"])(" "+Object(n["K"])(t.goods.price+".00"),1)])])])])})),128))]),Object(n["j"])(C,{class:"submit-all",price:100*m.total,"button-text":"生成订单",onSubmit:m.handleCreateOrder},{default:Object(n["P"])((function(){return[p]})),_:1},8,["price","onSubmit"]),Object(n["j"])(K,{show:t.showPay,"onUpdate:show":e[2]||(e[2]=function(e){return t.showPay=e}),closeable:"","close-on-click-overlay":!1,position:"bottom",style:{height:"40%"},onClose:m.close},{default:Object(n["P"])((function(){return[Object(n["j"])(G,{border:!1,"column-num":2},{default:Object(n["P"])((function(){return[Object(n["j"])(k,null,{default:Object(n["P"])((function(){return[h,v,Object(n["j"])(N,{width:"150",height:"150",src:t.aliyun},null,8,["src"])]})),_:1}),Object(n["j"])(k,null,{default:Object(n["P"])((function(){return[g,y,Object(n["j"])(N,{width:"150",height:"150",src:t.wechat},null,8,["src"])]})),_:1})]})),_:1})]})),_:1},8,["show","onClose"])])}var w=c("5530"),_=(c("4de4"),c("159b"),c("a7ac")),P=c("6c02"),C=c("5502"),N=c("e05b"),k=c("178e"),G=c("626a"),K={components:{NavBar:_["a"]},setup:function(){var t=Object(P["d"])(),e=Object(C["b"])(),c=Object(n["C"])({cartList:[],address:{},showPay:!1,orderNo:"",aliyun:"",wechat:""}),r=function(){G["a"].loading({message:"加载中...",forbidClick:!0}),Object(N["d"])().then((function(t){var e=t.address.filter((function(t){return 1===t.is_default}));e.length,0===e.length?c.address={address:"还没有设置默认地址，选择或者填写地址信息"}:c.address=e[0],c.cartList=t.carts}))};Object(n["v"])((function(){r()}));var a=function(){t.push({path:"/address"})},o=function(){var n={address_id:c.address.id};Object(N["e"])(n).then((function(n){G["a"].success("创建订单成功"),e.dispatch("updateCart"),c.showPay=!0,c.orderNo=n.id,Object(k["a"])(c.orderNo,{type:"aliyun"}).then((function(t){c.aliyun=t.qr_code_url,c.wechat=t.qr_code_url}));var r=setInterval((function(){Object(k["b"])(c.orderNo).then((function(e){2===e&&(clearInterval(r),t.push({path:"/orderdetail",query:{id:c.orderNo}}))}))}),2e3)}))},s=function(){t.push({path:"/orderdetail",query:{id:c.orderNo}})},u=Object(n["e"])((function(){var t=0;return c.cartList.forEach((function(e){t+=parseInt(e.num)*parseFloat(e.goods.price)})),t}));return Object(w["a"])(Object(w["a"])({},Object(n["L"])(c)),{},{goTo:a,handleCreateOrder:o,close:s,total:u})}};c("7fa7");K.render=m;e["default"]=K},b0c0:function(t,e,c){var n=c("83ab"),r=c("9bf2").f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,u="name";n&&!(u in a)&&r(a,u,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})}}]);