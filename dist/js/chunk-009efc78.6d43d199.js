(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-009efc78"],{"178e":function(t,e,c){"use strict";c.d(e,"b",(function(){return a})),c.d(e,"a",(function(){return r}));var n=c("1bab");function a(t){return Object(n["a"])({url:"/api/orders/".concat(t,"/status")})}function r(t,e){return Object(n["a"])({url:"/api/orders/".concat(t,"/pay"),params:e})}},"3d98":function(t,e,c){},"5a4f":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a=Object(n["S"])("data-v-96f338b2");Object(n["B"])("data-v-96f338b2");var r={class:"order-detail-box"},i=Object(n["i"])("订单详情"),l={class:"order-status"},u={class:"status-item"},o=Object(n["j"])("label",null,"订单状态：",-1),b={class:"status-item"},j=Object(n["j"])("label",null,"订单编号：",-1),s={class:"status-item"},d=Object(n["j"])("label",null,"下单时间：",-1),O=Object(n["i"])("去支付"),f=Object(n["i"])("确认订单"),h={class:"order-price"},v={class:"price-item"},p=Object(n["j"])("label",null,"商品金额：",-1),y=Object(n["j"])("div",{class:"price-item"},[Object(n["j"])("label",null,"配送方式："),Object(n["j"])("span",null,"普通快递")],-1),m={class:"goods"},w=Object(n["j"])("div",{style:{width:"100%",height:"50px"}},null,-1),g={style:{width:"90%",margin:"0 auto",padding:"50px 0"}},_=Object(n["i"])(" 支付宝二维码 "),k=Object(n["j"])("br",null,null,-1),C=Object(n["i"])(" 微信支付二维码 "),G=Object(n["j"])("br",null,null,-1);Object(n["z"])();var N=a((function(t,e,c,N,P,q){var x=Object(n["G"])("nav-bar"),K=Object(n["G"])("van-button"),D=Object(n["G"])("van-card"),I=Object(n["G"])("van-image"),S=Object(n["G"])("van-grid-item"),B=Object(n["G"])("van-grid"),E=Object(n["G"])("van-popup");return Object(n["y"])(),Object(n["g"])("div",r,[Object(n["j"])(x,{class:"nav-bar"},{default:a((function(){return[i]})),_:1}),Object(n["j"])("div",l,[Object(n["j"])("div",u,[o,Object(n["j"])("span",null,Object(n["K"])(N.statusString),1)]),Object(n["j"])("div",b,[j,Object(n["j"])("span",null,Object(n["K"])(t.detail.order_no),1)]),Object(n["j"])("div",s,[d,Object(n["j"])("span",null,Object(n["K"])(t.detail.created_at),1)]),1==t.detail.status?(Object(n["y"])(),Object(n["g"])(K,{key:0,onClick:N.showPayFn,style:{"margin-bottom":"10px"},color:"#1baeae",block:""},{default:a((function(){return[O]})),_:1},8,["onClick"])):Object(n["h"])("",!0),3==t.detail.status?(Object(n["y"])(),Object(n["g"])(K,{key:1,onClick:N.handleConfirmOrder},{default:a((function(){return[f]})),_:1},8,["onClick"])):Object(n["h"])("",!0)]),Object(n["j"])("div",h,[Object(n["j"])("div",v,[p,Object(n["j"])("span",null,"￥"+Object(n["K"])(N.total+".00"),1)]),y]),Object(n["j"])("div",m,[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(t.detail.orderDetails.data,(function(t){return Object(n["y"])(),Object(n["g"])(D,{key:t.id,num:t.num,price:t.price,desc:"全场包邮",title:t.goods.title,thumb:t.goods.cover_url},null,8,["num","price","title","thumb"])})),128))]),w,Object(n["j"])(E,{show:t.showPay,"onUpdate:show":e[1]||(e[1]=function(e){return t.showPay=e}),position:"bottom",style:{height:"40%"}},{default:a((function(){return[Object(n["j"])("div",g,[Object(n["j"])(B,{border:!1,"column-num":2},{default:a((function(){return[Object(n["j"])(S,null,{default:a((function(){return[_,k,Object(n["j"])(I,{width:"150",height:"150",src:t.aliyun},null,8,["src"])]})),_:1}),Object(n["j"])(S,null,{default:a((function(){return[C,G,Object(n["j"])(I,{width:"150",height:"150",src:t.wechat},null,8,["src"])]})),_:1})]})),_:1})])]})),_:1},8,["show"])])})),P=c("5530"),q=(c("159b"),c("a7ac")),x=c("6c02"),K=c("e05b"),D=c("178e"),I=c("626a"),S=c("75e6"),B={components:{NavBar:q["a"]},setup:function(){var t=Object(x["c"])(),e=Object(x["d"])(),c=Object(n["C"])({orderNo:"",detail:{orderDetails:{data:[]}},showPay:!1,aliyun:"",wechat:""}),a=function(){var e=t.query.id;c.orderNo=e,Object(K["b"])(e).then((function(t){c.detail=t}))};Object(n["v"])((function(){I["a"].loading({message:"加载中...",forbidClick:!0}),a(),I["a"].clear()}));var r=Object(n["e"])((function(){var t=["","已下单","已支付","等待发货","确认收货","已过期"];return t[c.detail.status]})),i=Object(n["e"])((function(){var t=0;return c.detail.orderDetails.data.forEach((function(e){t+=e.num*e.price})),t})),l=function(){c.showPay=!0,Object(D["a"])(c.orderNo,{type:"aliyun"}).then((function(t){c.aliyun=t.qr_code_url,c.wechat=t.qr_code_url}));var t=setInterval((function(){Object(D["b"])(c.orderNo).then((function(n){2===n&&(clearInterval(t),c.showPay=!1,e.push({path:"/orderdetail",query:{id:c.orderNo}}))}))}),2e3)},u=function(){S["a"].confirm({title:"是否确认订单"}).then((function(){Object(K["a"])(c.orderNo).then((function(t){204===t.status_code&&(Object(I["a"])("确认成功"),a())}))})).catch((function(){}))},o=function(){S["a"].close()};return Object(P["a"])(Object(P["a"])({},Object(n["L"])(c)),{},{statusString:r,total:i,showPayFn:l,handleConfirmOrder:u,close:o})}};c("b9bb");B.render=N,B.__scopeId="data-v-96f338b2";e["default"]=B},b9bb:function(t,e,c){"use strict";c("3d98")}}]);